//////////////////////////////////////////////////
//////////			DATA 			//////////////
//////////////////////////////////////////////////
let portfolioData = [
	{
    "id": 1,
    "className": "f-print",
    "img": "img/worksCard/card-1.png",
    "description": "Cards design"
  },
  {
    "id": 2,
    "className": "f-photo",
    "img": "img/worksCard/card-2.png",
    "description": "Cards design"
  },
  {
    "id": 3,
    "className": " f-anim",
    "img": "img/worksCard/card-3.png",
    "description": "Cards design"
  },
  {
    "id": 4,
    "className": "f-print",
    "img": "img/worksCard/card-4.png",
    "description": "Cards design"
  },
  {
    "id": 5,
    "className": " f-anim",
    "img": "img/worksCard/card-5.png",
    "description": "Cards design"
  },
  {
    "id": 6,
    "className": "f-photo",
    "img": "img/worksCard/card-6.png",
    "description": "Cards design"
  },
  {
    "id": 7,
    "className": " f-anim",
    "img": "img/worksCard/card-7.png",
    "description": "Cards design"
  },
  {
    "id": 8,
    "className": "f-photo",
    "img": "img/worksCard/card-8.png",
    "description": "Cards design"
  },
  {
    "id": 9,
    "className": "f-print",
    "img": "img/worksCard/card-9.png",
    "description": "Cards design"
  },
  {
    "id": 10,
    "className": "f-photo",
    "img": "img/worksCard/card-10.png",
    "description": "Cards design"
  },
  {
    "id": 11,
    "className": "f-print",
    "img": "img/worksCard/card-11.png",
    "description": "Cards design"
  },
  {
    "id": 12,
    "className": "f-print",
    "img": "img/worksCard/card-12.png",
    "description": "Cards design"
  },
  {
    "id": 13,
    "className": "f-web",
    "img": "img/worksCard/card-13.png",
    "description": "Cards design"
  },
  {
    "id": 14,
    "className": "f-web",
    "img": "img/worksCard/card-14.png",
    "description": "Cards design"
  },
  {
    "id": 15,
    "className": "f-web",
    "img": "img/worksCard/card-15.png",
    "description": "Cards design"
  },
  {
    "id": 16,
    "className": "f-web",
    "img": "img/worksCard/card-16.png",
    "description": "Cards design"
  },
];
let postsData = [
	{
		"id": 1,
		"title": "Blog title number 1",
		"img": "img/blog/post-1.jpg",
		"body": "Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolor ipsa illo id incidunt aliquid debitis possimus omnis libero voluptates neque esse distinctio cumque cum ab, velit autem praesentium! Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum.",
		"date": "September 12, 2020",
		"tags": "Website | Design",
		"comments": 12,
		"category": "media"
	},
	{
		"id": 2,
		"title": "Blog title number 2",
		"img": "img/blog/post-2.jpg",
		"body": "Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolor ipsa illo id incidunt aliquid debitis possimus omnis libero voluptates neque esse distinctio cumque cum ab, velit autem praesentium! Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum.",
		"date": "September 12, 2020",
		"tags": "Design",
		"comments": 123,
		"category": "media"
	},
	{
		"id": 3,
		"title": "Blog title number 3",
		"img": "img/blog/post-7.jpg",
		"body": "Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolor ipsa illo id incidunt aliquid debitis possimus omnis libero voluptates neque esse distinctio cumque cum ab, velit autem praesentium! Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum. Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum.",
		"date": "September 12, 2020",
		"tags": "Spots news",
		"comments": 46,
		"category": "sport"
	},
	{
		"id": 4,
		"title": "Blog title number 4",
		"img": "img/blog/post-3.png",
		"body": "Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolor ipsa illo id incidunt aliquid debitis possimus omnis libero voluptates neque esse distinctio cumque cum ab, velit autem praesentium! Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum. Animi quasi alias pariatur et fuga error maiores.",
		"date": "September 12, 2020",
		"tags": "Social",
		"comments": 97,
		"category": "media"
	},
	{
		"id": 5,
		"title": "Blog title number 5",
		"img": "img/blog/post-5.png",
		"body": "Lorem ipsum, dolor sit amet consectetur.",
		"date": "September 12, 2020",
		"tags": "Media",
		"comments": 777,
		"category": "media"
	},
	{
		"id": 6,
		"title": "Blog title number 6",
		"img": "img/blog/post-8.jpg",
		"body": "Lorem ipsum, dolor ipsum, dolor sit ipsum, dolor sit ipsum, dolor sit.",
		"date": "September 12, 2020",
		"tags": "Sportlife",
		"comments": 9867,
		"category": "sport"
	},
	{
		"id": 7,
		"title": "Blog title number 7",
		"img": "img/blog/post-9.jpg",
		"body": "Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolor ipsa illo id incidunt aliquid debitis possimus omnis libero voluptates neque esse distinctio cumque cum ab, velit autem praesentium! Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum. Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum.",
		"date": "September 12, 2020",
		"tags": "Sports",
		"comments": 12411,
		"category": "sport"
	},
	{
		"id": 8,
		"title": "Blog title number 8",
		"img": "img/blog/post-3.png",
		"body": "Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolor ipsa illo id incidunt aliquid debitis possimus omnis libero voluptates neque esse distinctio cumque cum ab, velit autem praesentium! Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum. Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum.",
		"date": "September 12, 2020",
		"tags": "Website",
		"comments": 1297,
		"category": "media"
	},
	{
		"id": 9,
		"title": "Blog title number 9",
		"img": "img/blog/post-6.png",
		"body": "Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolor ipsa illo id incidunt aliquid debitis possimus omnis libero voluptates neque esse distinctio cumque cum ab, velit autem praesentium! Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum. Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum.",
		"date": "September 12, 2020",
		"tags": "Design",
		"comments": 432,
		"category": "media"
	},
	{
		"id": 10,
		"title": "Blog title number 10",
		"img": "img/blog/post-10.jpg",
		"body": "Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolor ipsa illo id incidunt aliquid debitis possimus omnis libero voluptates neque esse distinctio cumque cum ab, velit autem praesentium! Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum. Animi quasi alias pariatur et fuga error maiores impedit sit, consectetur, laborum.",
		"date": "September 12, 2020",
		"tags": "FC Barcelona",
		"comments": 14153,
		"category": "sport"
	},
];
//////////////////////////////////////////////////
//////////			DATA 			//////////////
//////////////////////////////////////////////////




//////////////////////////////////////////////////
//////////			burger 			//////////////
//////////////////////////////////////////////////
	let burger = document.querySelector('.header__burger'),
		listHeader = document.querySelector('.header__list');

	burger.addEventListener('click', function(){
		burger.classList.toggle('active');
		listHeader.classList.toggle('active');
	});
//////////////////////////////////////////////////
//////////		slider title 		//////////////
//////////////////////////////////////////////////
	let swiper = document.querySelector('.swiper-container');
	if(swiper){
		let galleryThumbs = new Swiper('.gallery-thumbs', {
			cssMode: true,
		    spaceBetween: 10,
		    slidesPerView: 10,
		    freeMode: true,
		    watchSlidesVisibility: true,
		    watchSlidesProgress: true,
		});
	    let galleryTop = new Swiper('.gallery-top', {
	    	spaceBetween: 10,
	    	loop: true,
	    	autoplay: {
		        delay: 3000,
		        disableOnInteraction: false,
		    },
		    effect: 'fade',
	    	navigation: {
	        	nextEl: '.swiper-button-next',
	        	prevEl: '.swiper-button-prev',
	        },
	    	thumbs: {
	        	swiper: galleryThumbs
	        }
	    });
	};
//////////////////////////////////////////////////
//////////	works, portfolio tab	//////////////
//////////////////////////////////////////////////
let tabFunction = function(nav, tabs, filterCards){
	nav.onclick = function(e){
		if(e.target.tagName != 'LI') return;
		activeTab(e.target);

		let filterTab = e.target.dataset['f'];
		// console.log(filterTab);

		filterCards.forEach(elem => {
			elem.classList.remove('hide');
			if(!elem.classList.contains(filterTab) && filterTab!== 'all'){
				elem.classList.add('hide');
			}
		});
	}
	function activeTab(e){
		tabs.forEach(el => el.classList.remove('active'));
		e.classList.add('active');
	};
};


let worksNav = document.querySelector('.works__list'),
	worksTabs = Array.from(document.querySelectorAll('.works__tab'));
const worksFilter = document.querySelectorAll('.card');

if(worksNav){
	tabFunction(worksNav,worksTabs,worksFilter);
};

let portfolioNav = document.querySelector('.portfolio__tab');

if(portfolioNav){
	const cardsWrapper = document.querySelector('.portfolio__cards');
	const createTemplate = (data, id) => {
	    return `
	        <div class="portfolio__card ${portfolioData[id].className}">
				<a href="#" onclick="return false">
					<img src="${portfolioData[id].img}" alt="">
					<span>${portfolioData[id].description}</span>
				</a>
			</div>
	    `
	}
	function displayPortfolio(){
		portfolioData.forEach( (el, id) => {
			cardsWrapper.innerHTML += createTemplate(el, id);
		});
		let portfolioTabs =  Array.from(document.querySelectorAll('.portfolio__tab-link'));
		let portfolioFilter = document.querySelectorAll('.portfolio__card');

		tabFunction(portfolioNav,portfolioTabs,portfolioFilter);
	}
	displayPortfolio();
};
//////////////////////////////////////////////////
//////////		portfolio 			//////////////
//////////////////////////////////////////////////


//////////////////////////////////////////////////
//////////		footer				//////////////
//////////////////////////////////////////////////
let footerRecent = document.querySelector('.footer__recent');
let footerAbout = document.querySelector('.footer__about');

let toggleFooter = function(elem){
	elem.addEventListener('click', function(){
		elem.classList.toggle('toggle');
	});
};

toggleFooter(footerRecent);
toggleFooter(footerAbout);




//////////////////////////////////////////////////
//////////		    blog   			//////////////
//////////////////////////////////////////////////
let blog = document.querySelector('.blog');

if(blog){
	const postsWrapper = document.querySelector('.posts');
	const createTemplate = (data, elId) => {
	    return `
		    <div id="post-id-${postsData[elId].id}" class="post _${postsData[elId].category}">
				<h3>${postsData[elId].title}</h3>
				<div class="post__media">
					<img src="${postsData[elId].img}" alt="">
				</div>
				<div class="post__information">
					<div class="post__metrica">
						<div class="post__date">
							<h5>Date</h5>
							<p>${postsData[elId].date}</p>
						</div>
						<div class="post__tag">
							<h5>Tags</h5>
							<p>${postsData[elId].tags}</p>
						</div>
						<div class="post__comments">
							<h5>Comments</h5>
							<p>${postsData[elId].comments}</p>
						</div>
					</div>
					<div class="post__description">
						${postsData[elId].body}
					</div>
				</div>							
			</div>
	    `
	}
	const filter = document.querySelector('.blog__title-filter');
	const closeFilter = document.querySelector('.close-filter');
	const filterNav = document.querySelector('.nav-blog');
	filter.addEventListener('click', function(){
		filterNav.classList.add('filter');
	});
	closeFilter.addEventListener('click',function(){
		filterNav.classList.remove('filter');
	});

	function DisplayList (items, wrapper, rows_per_page, page) {
		wrapper.innerHTML = "";
		page--;

		let start = rows_per_page * page;
		let end = start + rows_per_page;
		let paginatedItems = items.slice(start, end);

		for (let i = 0; i < paginatedItems.length; i++) {
			let item = paginatedItems[i];

			let item_element = document.createElement('div');
			item_element.classList.add('post-item');
			item_element.innerHTML = item;
			
			wrapper.appendChild(item_element);
		}
	}
	function SetupPagination (items, wrapper, rows_per_page) {
		wrapper.innerHTML = "";

		let page_count = Math.ceil(items.length / rows_per_page);
		for (let i = 1; i < page_count + 1; i++) {
			let btn = PaginationButton(i, items);
			wrapper.appendChild(btn);
		}
	}
	function PaginationButton (page, items) {
		let button = document.createElement('button');
		button.innerText = page;
	
		if (current_page == page) button.classList.add('active');

		button.addEventListener('click', function () {
			current_page = page;
			DisplayList(items, list_element, rows, current_page);
			window.scroll(0,120);

			let current_btn = document.querySelector('.pagination button.active');
			current_btn.classList.remove('active');

			button.classList.add('active');
		});

		return button;
	}


	let categoryAll = document.querySelector('.category__all'),
		categoryMedia = document.querySelector('.category__media'),
		categorySport = document.querySelector('.category__sport');
	let dataArr = [];
	let list_items = [];
	let media_items = [];
	let sport_items = [];

	let current_page = 1;
	let rows = 3;

	let countSport = [];
    let countMedia = [];

	const list_element = document.querySelector('.posts');
	const pagination_element = document.querySelector('.pagination');

	function displayPosts(){
		postsData.forEach((el, id) => {
	    	if(el.category == "media") countMedia.push(el);
			if(el.category == "sport") countSport.push(el);           	
	    });
	    categoryAll.innerText = `All (${countSport.length + countMedia.length})`;
        categorySport.innerText = `Sport (${countSport.length})`;
        categoryMedia.innerText = `Media (${countMedia.length})`;

        postsData.forEach(el => dataArr.push(el));
        postsData.forEach((element, id) => {
            list_items.push(createTemplate(element, id));
        });

        DisplayList(list_items, list_element, rows, current_page);
		SetupPagination(list_items, pagination_element, rows);

		categoryMedia.addEventListener('click', function(){
			list_element.innerHTML = '';
			current_page = 1;
			media_items = [];
			postsData.forEach((el, id) => {
				if(el.category == 'media') media_items.push(createTemplate(el, id));
			});
			categoryMedia.classList.add('active');
			categoryAll.classList.remove('active');
			categorySport.classList.remove('active');
			filterNav.classList.remove('filter');
			DisplayList(media_items, list_element, rows, current_page);
			SetupPagination(media_items, pagination_element, rows);
		});
		categorySport.addEventListener('click', function(){
			list_element.innerHTML = '';
			current_page = 1;
			sport_items = [];
			postsData.forEach((el, id) => {
				if(el.category == 'sport') sport_items.push(createTemplate(el, id));
			});
			categorySport.classList.add('active');
			categoryAll.classList.remove('active');
			categoryMedia.classList.remove('active');
			filterNav.classList.remove('filter');
			DisplayList(sport_items, list_element, rows, current_page);
			SetupPagination(sport_items, pagination_element, rows);
		});
		categoryAll.addEventListener('click', function(){
			list_element.innerHTML = '';
			current_page = 1;
			sport_items = [];
			media_items = [];
			categoryAll.classList.add('active');
			categorySport.classList.remove('active');
			categoryMedia.classList.remove('active');
			filterNav.classList.remove('filter');
			DisplayList(list_items, list_element, rows, current_page);
			SetupPagination(list_items, pagination_element, rows);
		});
	};
	displayPosts();
};
//////////////////////////////////////////////////
//////////		    blog   			//////////////
//////////////////////////////////////////////////
